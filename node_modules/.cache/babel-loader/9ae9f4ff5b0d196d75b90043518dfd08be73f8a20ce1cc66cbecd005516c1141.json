{"ast":null,"code":"// src/components/CreateGame.js\nimport React,{useState,useEffect}from'react';import{useLocation,useNavigate,Link}from'react-router-dom';import axios from'axios';import'./CreateGame.css';import{ReactComponent as LoadingSpinner}from'../assets/loading-spinner.svg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateGame=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const[playerName,setPlayerName]=useState(((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.playerName)||'');const[gameId,setGameId]=useState('');const[message,setMessage]=useState('');const[isCreating,setIsCreating]=useState(false);useEffect(()=>{if(!playerName){navigate('/');}},[playerName,navigate]);const handleCreateGame=async()=>{setIsCreating(true);try{const response=await axios.post('http://localhost:5000/api/games',{playerName});setGameId(response.data.gameId);setMessage(response.data.message);}catch(err){console.error('Error creating game:',err);setMessage('Error creating game. Please try again.');}finally{setIsCreating(false);}};const nextQuestion=()=>{const nextIndex=(currentQuestion+1)%questions.length;setCurrentQuestion(nextIndex);};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-game-container\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"nav-bar\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"logo\",children:[\"NUMBER\",/*#__PURE__*/_jsx(\"span\",{className:\"logo-accent\",children:\"POSITION\"})]})}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsx(\"div\",{className:\"game-card\",children:!gameId?/*#__PURE__*/_jsxs(\"div\",{className:\"creation-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Game\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"player-label\",children:\"Player Name:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"player-name\",children:playerName})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn create-btn\",onClick:handleCreateGame,disabled:isCreating,children:isCreating?/*#__PURE__*/_jsx(LoadingSpinner,{className:\"spinner\"}):'Generate Game Code'}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert error\",children:message})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"waiting-panel\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Game Created!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-id-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Game Code:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"code\",children:gameId})]}),/*#__PURE__*/_jsx(\"p\",{className:\"instructions\",children:\"Share this code with Player 2 to start the game.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-indicator\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Waiting for player 2 to join...\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert info\",children:message})]})})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"copyright\",children:[\"\\xA9 \",new Date().getFullYear(),\" Number Position Game. All rights reserved.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/privacy\",children:\"Privacy Policy\"}),/*#__PURE__*/_jsx(Link,{to:\"/terms\",children:\"Terms of Service\"})]}),/*#__PURE__*/_jsx(PlayerJoinPoll,{gameId:gameId,playerName:playerName,navigate:navigate})]})]});};const PlayerJoinPoll=_ref=>{let{gameId,playerName,navigate}=_ref;useEffect(()=>{if(!gameId)return;const interval=setInterval(async()=>{try{const response=await axios.get(\"http://localhost:5000/api/games/\".concat(gameId));const game=response.data;if(game.players.length===2&&game.status==='waitingForSecret'){navigate(\"/\".concat(playerName,\"/setsecretcode/\").concat(gameId));}}catch(err){console.error('Error polling game status:',err);}},3000);return()=>clearInterval(interval);},[gameId,playerName,navigate]);return null;};export default CreateGame;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","Link","axios","ReactComponent","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","CreateGame","_location$state","navigate","location","playerName","setPlayerName","state","gameId","setGameId","message","setMessage","isCreating","setIsCreating","handleCreateGame","response","post","data","err","console","error","nextQuestion","nextIndex","currentQuestion","questions","length","setCurrentQuestion","className","children","onClick","disabled","Date","getFullYear","to","PlayerJoinPoll","_ref","interval","setInterval","get","concat","game","players","status","clearInterval"],"sources":["C:/Users/ademm/Documents/Projects/number-position-game/client/src/components/CreateGame.js"],"sourcesContent":["// src/components/CreateGame.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './CreateGame.css';\r\nimport { ReactComponent as LoadingSpinner } from '../assets/loading-spinner.svg';\r\n\r\n\r\nconst CreateGame = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const [playerName, setPlayerName] = useState(location.state?.playerName || '');\r\n    const [gameId, setGameId] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [isCreating, setIsCreating] = useState(false);\r\n\r\n\r\n    useEffect(() => {\r\n        if (!playerName) {\r\n            navigate('/');\r\n        }\r\n    }, [playerName, navigate]);\r\n\r\n    const handleCreateGame = async () => {\r\n        setIsCreating(true);\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/games', { playerName });\r\n            setGameId(response.data.gameId);\r\n            setMessage(response.data.message);\r\n        } catch (err) {\r\n            console.error('Error creating game:', err);\r\n            setMessage('Error creating game. Please try again.');\r\n        } finally {\r\n            setIsCreating(false);\r\n        }\r\n    };\r\n\r\n    const nextQuestion = () => {\r\n        const nextIndex = (currentQuestion + 1) % questions.length;\r\n        setCurrentQuestion(nextIndex);\r\n    };\r\n\r\n    return (\r\n        <div className=\"create-game-container\">\r\n            <nav className=\"nav-bar\">\r\n                <h1 className=\"logo\">NUMBER<span className=\"logo-accent\">POSITION</span></h1>\r\n            </nav>\r\n\r\n            <main className=\"main-content\">\r\n                <div className=\"game-card\">\r\n                    {!gameId ? (\r\n                        <div className=\"creation-panel\">\r\n                            <h2>Create New Game</h2>\r\n                            <div className=\"player-info\">\r\n                                <span className=\"player-label\">Player Name:</span>\r\n                                <span className=\"player-name\">{playerName}</span>\r\n                            </div>\r\n                            <button\r\n                                className=\"btn create-btn\"\r\n                                onClick={handleCreateGame}\r\n                                disabled={isCreating}\r\n                            >\r\n                                {isCreating ? (\r\n                                    <LoadingSpinner className=\"spinner\" />\r\n                                ) : (\r\n                                    'Generate Game Code'\r\n                                )}\r\n                            </button>\r\n                            {message && <div className=\"alert error\">{message}</div>}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"waiting-panel\">\r\n                            <h2>Game Created!</h2>\r\n                            <div className=\"game-id-display\">\r\n                                <span className=\"label\">Game Code:</span>\r\n                                <span className=\"code\">{gameId}</span>\r\n                            </div>\r\n                            <p className=\"instructions\">\r\n                                Share this code with Player 2 to start the game.\r\n                            </p>\r\n                            <div className=\"status-indicator\">\r\n                                <LoadingSpinner className=\"spinner\" />\r\n                                <span>Waiting for player 2 to join...</span>\r\n                            </div>\r\n                            {message && <div className=\"alert info\">{message}</div>}\r\n\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n\r\n            </main>\r\n\r\n            <footer className=\"footer\">\r\n                <p className=\"copyright\">\r\n                    Â© {new Date().getFullYear()} Number Position Game. All rights reserved.\r\n                </p>\r\n                <div className=\"footer-links\">\r\n                    <Link to=\"/privacy\">Privacy Policy</Link>\r\n                    <Link to=\"/terms\">Terms of Service</Link>\r\n                </div>\r\n                <PlayerJoinPoll gameId={gameId} playerName={playerName} navigate={navigate} />\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PlayerJoinPoll = ({ gameId, playerName, navigate }) => {\r\n    useEffect(() => {\r\n        if (!gameId) return;\r\n\r\n        const interval = setInterval(async () => {\r\n            try {\r\n                const response = await axios.get(`http://localhost:5000/api/games/${gameId}`);\r\n                const game = response.data;\r\n                if (game.players.length === 2 && game.status === 'waitingForSecret') {\r\n                    navigate(`/${playerName}/setsecretcode/${gameId}`);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error polling game status:', err);\r\n            }\r\n        }, 3000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [gameId, playerName, navigate]);\r\n\r\n    return null;\r\n};\r\n\r\nexport default CreateGame;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}